jQuery(document).ready(function(t){function s(n,r,p,o){var i=(new Date).getTime();t.ajax({url:ajaxurl,type:"POST",data:{action:"st_sync_price_process",offset:n,total:r,step:3,index:o},success:function(n){if(parseInt(n.stop))return a=!0,c.append('<br /><b class="sync-done">Successful all.</b><br>'),"undefined"!=n.last_sync&&t(".st-sync-price-note").text("Last Sync: "+n.last_sync),void t(".st_btn_start_sync_price").text(e);if(parseInt(n.offset)<=parseInt(n.total)&&parseInt(n.stop)<1){0==parseInt(n.offset)&&(parseInt(n.index)>0?c.append('<b class="sync-done">Done</b><br />'):c.append("<br /><b>Start sync...</b><br />"));var r=(new Date).getTime();c.append("on sync "+n.offset+"/"+n.total+" ("+(r-i)/1e3+"s) ...<br />"),s(parseInt(n.offset)+2,parseInt(n.total),n.post_type,parseInt(n.index))}}})}var e=t(".st_btn_start_sync_price").data("text"),n=t(".st_btn_start_sync_price").data("text-in"),a=!0,c=t(".st_sync_price_log");t(".st_btn_start_sync_price").click(function(){c.html(""),c.append("<b>Starting Sync Price Data</b><br>"),a&&(a=!1,t(this).text(n),t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"st_sync_price_process",step:1},success:function(e){t.ajax({url:ajaxurl,type:"POST",data:{action:"st_sync_price_process",step:2,post_type:e},success:function(t){s(0,t.total,e)}})}}))})});